{% extends 'doctor/doctor_index.html' %}
{% load static %}

{% block content %}
<div class="container py-5" style="max-width: 750px;">
    <h2 class="text-center mb-4 fw-bold" style="color: #457B9D;">My Profile</h2>

    <div class="card shadow p-4 rounded-3 border-0">
        <div class="text-center mb-4">
            {% if doctor.image %}
            <img src="{{ doctor.image.url }}" alt="Profile Image"
                class="rounded-circle shadow-sm border border-3 border-light"
                style="width: 130px; height: 130px; object-fit: cover;">
            {% else %}
            <img src="{% static 'default-avatar.png' %}" class="rounded-circle shadow-sm border border-3 border-light"
                style="width: 130px; height: 130px; object-fit: cover;">
            {% endif %}
            <h4 class="mt-3 text-dark fw-semibold">{{ doctor.name }}</h4>
            <p class="text-muted mb-0">
                {% if doctor.specialization %}{{ doctor.specialization.department }}{% else %}N/A{% endif %}
            </p>
        </div>

        <table class="table table-borderless align-middle">
            <tr>
                <th class="text-secondary" style="width: 35%;">Email</th>
                <td>{{ doctor.email }}</td>
            </tr>
            <tr>
                <th class="text-secondary">Phone Number</th>
                <td>{{ doctor.phone_number }}</td>
            </tr>
            <tr>
                <th class="text-secondary">Qualification</th>
                <td>{{ doctor.qualification }}</td>
            </tr>
            <tr>
                <th class="text-secondary">Experience</th>
                <td>{{ doctor.experience }}</td>
            </tr>

            <!-- ✅ Working Days -->
            <tr>
                <th class="text-secondary">Working Days</th>
                <td>
                    {% if doctor.working_days %}
                    {% for day in doctor.working_days %}
                    <span class="badge text-white me-1 mb-1" style="background-color: #457B9D; font-weight: 500;">
                        {{ day|capfirst }}
                    </span>
                    {% endfor %}
                    {% else %}
                    <span class="text-muted">Not set</span>
                    {% endif %}
                </td>
            </tr>

            <!-- ✅ ID Image -->
            <tr>
                <th class="text-secondary">ID Image</th>
                <td>
                    {% if doctor.id_image %}
                    <img src="{{ doctor.id_image.url }}" class="rounded shadow-sm border border-2 border-light"
                        style="width: 180px; height: 120px; object-fit: cover;">
                    {% else %}
                    <span class="text-muted">N/A</span>
                    {% endif %}
                </td>
            </tr>

            <!-- ✅ Status -->
            <tr>
                <th class="text-secondary">Status</th>
                <td>
                    {% if doctor.is_approved %}
                    <span class="badge text-white px-3 py-2" style="background-color: #28a745;">Approved</span>
                    {% else %}
                    <span class="badge text-dark px-3 py-2" style="background-color: #ffc107;">Pending Approval</span>
                    {% endif %}
                </td>
            </tr>
        </table>

        <div class="text-center mt-4">
            <a href="{% url 'doctor_update_profile' %}" class="btn text-white px-4 py-2"
                style="background-color: #457B9D; border-radius: 8px;">
                Update Profile
            </a>
        </div>
    </div>
</div>
{% endblock %}